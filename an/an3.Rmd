---
title: '[eb3] Analyses'
author: "Egor Ananyev"
date: '2020-03-09'
output:
  html_document:
    df_print: paged
    toc: yes
    toc_depth: '4'
  html_notebook:
    html_document:
      number_sections: yes
      toc: yes
      toc_depth: 4
      toc_float: yes
    number_sections: yes
    toc: yes
    toc_depth: 4
    toc_float: yes
editor_options:
  chunk_output_type: inline
---

<style type="text/css">
body, td{
  font-family: Cambria;
}
code.r{
  font-family: Inconsolata;
}
</style>


# Data input and parsing
```{r set-options, message=F}
# options(width=100)
# options(width=90)
out=F
library(plyr)
library(dplyr)
library(ggplot2)
library(lme4)
library(reshape2)
computer = 'acer'  # 'shocky', 'station3', 'acer' are all possible options
if(computer=='shocky'){ cloud_dir='C:/Users/Egor/Dropbox/' }
if(computer=='acer' || computer == 'toshi'){ cloud_dir = 'C:/Users/egora/Dropbox/' }
# if(computer=='shocky' || computer=='acer'){ cloud_dir='C:/gd/' }
if(computer=='station3'){ cloud_dir='/home/station3/Desktop/Egor/Dropbox/' }
source(paste(cloud_dir, 'Projects/eb/eb/an/funs_an/BF_t.R', sep='/'))
source(paste(cloud_dir, 'Projects/eb/eb/an/funs_an/BF_U.R', sep='/'))
library(R.utils)
sourceDirectory(paste(cloud_dir, 'Projects/eb/eb/an/funs_an', sep='/'))
source(paste('C:/gd/', 'Prog/R/myFunctions/pvalfn.R', sep=''))
ds = read.csv(paste(cloud_dir, 'Projects/eb/eb/an/consolidated/ds3.csv', sep='/'))
dsa = read.csv(paste(cloud_dir, 'Projects/eb/eb/an/consolidated/dsa3.csv', sep='/'))
# Reordering levels of Condition variable, such that No Blink condition is the reference:
ds$Cond = factor(ds$Cond, c('NoBlink','Artificial','Prompted'))
ds$CondFull = factor(ds$CondFull, c('No Blink','Artificial Blink','Prompted Blink'))
cue_valid_name = 'Cue Validity'
```


# Cueing


## Boxplots
```{r, fig.width=8.5, fig.height=2.5, results="hide"}
#TODO test this code
ctoa_valid = ddply(ds[ds$CueValid=='Valid',], .(targ_soa, Cond, subj), summarise,
                   RT=median(RT))
plot_box_ctoa(ctoa_valid, 'RT Valid (ms)', 'RT on Valid Trials', out, 'targ_soa', eb='eb3')
ctoa_invalid = ddply(ds[ds$CueValid=='Invalid',], .(targ_soa, Cond, subj), summarise, 
                  RT=median(RT))
plot_box_ctoa(ctoa_invalid, 'RT Invalid (ms)', 'RT on Invalid Trials', out, 'targ_soa', eb='eb3')
ctoa_adv = merge(ctoa_valid, ctoa_invalid, by=c('targ_soa', 'Cond', 'subj'))
ctoa_adv$RT = ctoa_adv$RT.y - ctoa_adv$RT.x  # Invalid - Valid RT
plot_box_ctoa(ctoa_adv, 'RT Invalid - Valid (ms)', 'RT Cueing Advantage', out, 'targ_soa', eb='eb3')
```


