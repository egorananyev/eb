---
title: "[eb1] Measurement - Quality Control"
author: "Egor Ananyev"
date: "2019-01-04"
output:
    html_document:
        toc: true
editor_options: 
  chunk_output_type: console
---

<style type="text/css">
body, td{
  font-family: Cambria;
}
code.r{
  font-family: Inconsolata;
}
</style>

# Data input and parsing
```{r set-options, message=F}
options(width=100)
shocky = F
debug = F
library(ggplot2)
if(shocky){dropbox_dir='/Users/egora/Dropbox/'} else{dropbox_dir='/Users/Egor/Dropbox/'}
data_dir = paste(dropbox_dir, 'Projects/eb/data/eb1/', sep='/')
subjs = dir(data_dir, pattern='subj-')
ds = data.frame()
cur_subj = subjs  # temp
cur_subj_dir = paste0(data_dir, cur_subj)
conds = dir(cur_subj_dir, pattern='cond-')
# cur_cond = conds[1]  # temp
for(cur_cond in conds){
  cur_cond_dir = paste(cur_subj_dir, cur_cond, sep='/')
  sesss = dir(cur_cond_dir, pattern='sess-')
  # cur_sess = sesss[1]  # temp
  for(cur_sess in sesss){
    cur_sess_dir = paste(cur_cond_dir, cur_sess, sep='/')
    cur_ds = read.csv(paste(cur_sess_dir, 'beh_out.csv', sep='/'))
    # print(colnames(cur_ds))  # debug
    # ds = cur_ds  # temp
    ds = rbind(ds, cur_ds)
  }
}
```

# Visualization
## Cueing
```{r, fig.width=3, fig.height=2.5}
for(cur_cond in c('a','c','v')){
  p = ggplot(data=ds[ds$cond==cur_cond,], aes(x=factor(cue_valid), y=rt))
  p = p + theme_bw() + ylim(.1,.9)
  p = p + geom_dotplot(binaxis='y', stackdir='center', dotsize=1, binwidth=.02)
  suppressWarnings(plot(p))
}
```

# Analyses
```{r}
summary(lm(rt~cond*cue_valid, data=ds))  # switch to lme4 for mixed models
1 / generalTestBF(rt ~ cond*cue_valid, data=ds, whichModels='top')
```